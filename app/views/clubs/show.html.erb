<p id="notice">
    <%= notice %>
</p>
<div class="mt-4 p-5 bg-light text-black rounded --bs-gray-500">
    <h1>
        <%= @club.club_name %>
    </h1>
    <p>
        <strong>Alte Nume</strong>
        <%= @club.alternative_club_name %>
    </p>
    <p>
        <strong>Teritoriu:</strong>
        <%= @club.territory %>
    </p>
    <p>
        <strong>Reprezentant:</strong>
        <%= @club.representative %>
    </p>
    <hr class="my-4">
    <p>
        <strong>Email</strong>
        <%= @club.email %>
    </p>
    <p>
        <strong>Telefon</strong>
        <%= @club.phone %>
    </p>
    <p>
        <strong>Numarul de sportivi:</strong>
        <%= @club.runners.count%>
    </p>
    <%= form_tag club_path(@club), method: :get, id: 'runners_search_form' do %>
    <%= text_field_tag :search, params[:search], id: 'show_search', placeholder: "Cauta dupa Nume sau Prenume", class: "form-control mb-2", table_type: "runners"%>
    <hr>
    <%= label_tag "category_id", "Categoria actuală", class: "label-filter" %>
    <%= select_tag :category_id, options_for_select(Category.pluck(:category_name, :id), params[:category_id]), include_blank: "Toate Categoriile",class: "custom-select" %>
    <br>
    <%= label_tag "best_category_id", "Titlul Sportiv", class: "label-filter" %>
    <%= select_tag :best_category_id, options_for_select(Category.pluck(:category_name, :id), params[:best_category_id]), include_blank: "Toate Categoriile",class: "custom-select" %>
    <br>
    <%= label_tag "gender", "Genul", class: "label-filter" %>
    <%= select_tag :gender, options_for_select(["M", "W"], params[:gender]), include_blank: "Toate Genurile", class: "custom-select" %>
    <br>
    <%= label_tag "wre", "WRE ID",class: "label-filter" %>
    <%= check_box_tag :wre, true, params[:wre], id: "wre" %>
    <br>
    <%= label_tag "dob[from]", "Data nasterii: De la", class: "label-filter", for: "dob[from]" %>
    <%= text_field_tag "dob[from]", params.dig("dob","from"), id: "dob[from]", placeholder: "zz/ll/aaaa", class: "datepicker custom-select" %>
    <%= label_tag "dob[to]", "Pina la", class: "label-filter", for: "dob[for]" %>
    <%= text_field_tag "dob[to]", params.dig("dob","to"), id: "dob[to]", placeholder: "zz/ll/aaaa", class: "datepicker custom-select" %>
    <hr>
    <br>
    <%= submit_tag "Filtreaza", class: "btn btn-info" %>
    <% end %>
    <table class="table table-striped table-bordered table-hover" id="runners-table">
        <thead class="table-primary">
            <tr>
                <th scope="col" class="sortable" data-sort-by="id">
                    <%= link_to 'FOS ID' %>
                </th>
                <th class="sortable" data-sort-by="runner">
                    <%= link_to 'Nume' %>
                </th>
                <th class="sortable" data-sort-by="gender">
                    <%= link_to 'Genul' %>
                </th>
                <th class="sortable" data-sort-by="dob">
                    <%= link_to 'Data Nastere'%>
                </th>
                <th class="sortable" data-sort-by="best_category_id">
                    <%= link_to 'Titlul Sportiv' %>
                </th>
                <th class="sortable" data-sort-by="category_id">
                    <%= link_to 'Categorie Valida' %>
                </th>
                <th class="sortable" data-sort-by="category_valid">
                    <%= link_to 'Valabilitate ' %>
                </th>
                <th class="sortable" data-sort-by="wre_id">
                    <%= link_to 'WRE ID' %>
                </th>
                <th class="sortable" data-sort-by="sprint_wre_rang">
                    <%= link_to 'Sprint WRE' %>
                </th>
                <th class="sortable" data-sort-by="forest_wre_rang">
                    <%= link_to 'Padure WRE' %>
                </th>
            </tr>
        </thead>
        <tbody>
            <% @runners.each do |runner| %>
            <tr>
                <td>
                    <%= runner.id %>
                </td>
                <td>
                    <%= "#{runner.runner_name} #{runner.surname}" %>
                </td>
                <td>
                    <%= runner.gender %>
                </td>
                <td>
                    <%= runner.dob.strftime("%d/%m/%Y") %>
                </td>
                <td>
                     <%= runner.best_category.category_name %>
                </td>
                <td>
                    <%= runner.category.category_name %>
                </td>
                <td>
                    <%= runner.category_valid&.strftime("%d/%m/%Y") %>
                </td>
                <td>
                    <%= runner.wre_id %>
                </td>
                <td>
                    <%= "#{runner.sprint_wre_place}/#{runner.sprint_wre_rang}p" %>
                </td>
                <td>
                    <%= "#{runner.forest_wre_place}/#{runner.forest_wre_rang}p" %>
                </td>
            </tr>
            <% end %>
        </tbody>
    </table>
    <p class="lead">
        <% if admin_user? || club_admin?(@club) %>
        <%= link_to 'Editează', edit_polymorphic_path(@club), class: "btn btn-success btn-sm" %>
        <%= link_to 'Șterge', @club, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger btn-sm" %>
        <% end %>
        <%= link_to 'Înapoi', request.referer, class: "btn btn-secondary btn-sm" %>
    </p>
</div>
